(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c20e37a2"],{"2b25":function(t,e,i){"use strict";i("8981")},"2e51":function(t,e,i){},"405e":function(t,e,i){"use strict";i("2e51")},5567:function(t,e,i){},"63c4":function(t,e,i){"use strict";i("5567")},"7f16":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"PageTitle"},[t._v(t._s(t.title))])},n=[],l={props:["title"]},s=l,a=(i("2b25"),i("2877")),r=Object(a["a"])(s,o,n,!1,null,"3d9e3b04",null);e["a"]=r.exports},8981:function(t,e,i){},a434:function(t,e,i){"use strict";var o=i("23e7"),n=i("23cb"),l=i("a691"),s=i("50c4"),a=i("7b0b"),r=i("65f0"),c=i("8418"),u=i("1dde"),f=i("ae40"),d=u("splice"),m=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,e){var i,o,u,f,d,m,g=a(this),y=s(g.length),k=n(t,y),_=arguments.length;if(0===_?i=o=0:1===_?(i=0,o=y-k):(i=_-2,o=h(p(l(e),0),y-k)),y+i-o>b)throw TypeError(v);for(u=r(g,o),f=0;f<o;f++)d=k+f,d in g&&c(u,f,g[d]);if(u.length=o,i<o){for(f=k;f<y-o;f++)d=f+o,m=f+i,d in g?g[m]=g[d]:delete g[m];for(f=y;f>y-o+i;f--)delete g[f-1]}else if(i>o)for(f=y-o;f>k;f--)d=f+o-1,m=f+i-1,d in g?g[m]=g[d]:delete g[m];for(f=0;f<i;f++)g[f+k]=arguments[f+2];return g.length=y-o+i,u}})},ea72:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("PageTitle",{attrs:{title:t.$route.meta.title}}),i("el-form",{staticClass:"filters",attrs:{model:t.filterForm,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"产品类型："}},[i("div",{class:"tag "+(-1===t.filterForm.productTypeIndex?"active":""),on:{click:function(e){return t.onTypeClick(-1)}}},[t._v("全部")]),t._l(t.productTypeList,(function(e,o){return i("div",{key:e,class:"tag "+(o===t.filterForm.productTypeIndex?"active":""),on:{click:function(e){return t.onTypeClick(o)}}},[t._v(t._s(e))])}))],2)],1),i("div",{staticClass:"list"},[i("div",{staticClass:"list-item",on:{click:t.onAdd}},[i("el-card",{staticClass:"add"},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v("新增产品")])])],1),t._l(t.list,(function(e,o){return i("el-card",{key:o,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[i("div",{staticClass:"my-card"},[i("div",{staticClass:"flex"},[i("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(o)}),i("div",{staticClass:"list-item__body"},[i("div",{staticClass:"body-title"},[t._v(t._s(e.name))]),i("div",{staticClass:"body-content"},[i("div",{staticClass:"content-item"},[t._v("产品类型："+t._s(e.type))]),i("div",{staticClass:"content-item"},[t._v("产品规格："+t._s(e.specification))])])])]),i("div",{staticClass:"list-item__footer"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onDelete(e,o)}}},[t._v("删除")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onEdit(e)}}},[t._v("编辑")])],1)])])}))],2),i("el-dialog",{attrs:{"custom-class":"add-dialog",title:(t.form.id?"编辑":"新增")+"产品",visible:t.formVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{ref:"productForm",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"产品名称"}},[i("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"产品类型"}},[i("el-select",{attrs:{placeholder:"请选择产品类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.productTypeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),i("el-form-item",{attrs:{label:"产品规格"}},[i("el-input",{attrs:{placeholder:"请输入产品规格"},model:{value:t.form.specification,callback:function(e){t.$set(t.form,"specification",e)},expression:"form.specification"}})],1),i("el-form-item",{attrs:{label:"产品克重"}},[i("el-input",{attrs:{placeholder:"请输入产品克重"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1),i("el-form-item",{attrs:{label:"克重单位"}},[i("el-select",{attrs:{placeholder:"请选择克重单位"},model:{value:t.form.weightUnit,callback:function(e){t.$set(t.form,"weightUnit",e)},expression:"form.weightUnit"}},t._l(t.weightUnitList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),i("el-form-item",{attrs:{label:"关联原料"}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择关联原料"},model:{value:t.form.materials,callback:function(e){t.$set(t.form,"materials",e)},expression:"form.materials"}},t._l(t.materialList,(function(e,o){return i("el-option",{key:o,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],l=(i("d81d"),i("a434"),i("4ec3")),s=i("7f16"),a=["#5bd171","#ffbf00","#AFB3AE"],r={components:{PageTitle:s["a"]},data:function(){return{loading:!1,list:[],filterForm:{productTypeIndex:-1},productTypeList:["麂皮绒","仿棉绒","荷兰绒","圈绒","金光绒","网眼布(涤纶)","经编平布","丝光绒","意大利绒"],weightUnitList:["g/m","g/m2"],formVisible:!1,submitLoading:!1,form:{},materialList:[]}},mounted:function(){this.cid=this.getcid(),this.getMaterialList(),this.getList()},methods:{getcid:function(){return this.$route.query.cid&&"undefined"!=this.$route.query.cid?this.$route.query.cid:this.$store.state.user&&this.$store.state.user.userInfo&&this.$store.state.user.userInfo.Company.id},getMaterialList:function(){var t=this;Object(l["k"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(e){t.materialList=e}))},getBgColor:function(t){return"number"===typeof t?"background-color: ".concat(a[t-Math.floor(t/a.length)*a.length],";"):"正常运行"===t?"background-color: ".concat(a[0],";"):"停机"===t?"background-color: ".concat(a[1],";"):"未连接"===t?"background-color: ".concat(a[2],";"):void 0},onClick:function(t){console.log("item",t),this.$router.push("/company/detail/".concat(t.id))},onAdd:function(){this.form={},this.formVisible=!0},onEdit:function(t){this.form=t,this.formVisible=!0},onDelete:function(t,e){var i=this;Object(l["l"])({operation:"DELETE",value:{id:t.id}}).then((function(){i.list.splice(e,1),i.$notify({title:"成功",message:"删除成功！",type:"success"})}))},onTypeClick:function(t){this.filterForm.productTypeIndex=t},getList:function(){var t=this;this.loading=!0,Object(l["l"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(e){e.map((function(t){t.Materials&&t.Materials.length>0&&(t.materials=t.Materials.map((function(t){return t.id})))})),t.list=e,t.loading=!1})).catch((function(e){t.loading=!1}))},onSubmit:function(){var t=this;this.$refs.productForm.validate((function(e){e&&(t.submitLoading=!0,t.form.companyId=t.cid,Object(l["l"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(e){t.submitLoading=!1,t.formVisible=!1,t.form.id||t.list.unshift(t.form),t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.submitLoading=!1})))}))},onFilter:function(){this.getList()}}},c=r,u=(i("63c4"),i("405e"),i("2877")),f=Object(u["a"])(c,o,n,!1,null,"10b13f11",null);e["default"]=f.exports}}]);