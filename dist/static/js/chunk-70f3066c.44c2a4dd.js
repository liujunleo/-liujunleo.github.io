(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70f3066c"],{2472:function(t,e,i){},"2b25":function(t,e,i){"use strict";i("8981")},"5e3e":function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("PageTitle",{attrs:{title:t.$route.meta.title}}),i("el-form",{staticClass:"filters",attrs:{model:t.filterForm,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"原料类型："}},[i("div",{class:"tag "+(-1===t.filterForm.typeIndex?"active":""),on:{click:function(e){return t.onTypeClick(-1)}}},[t._v("全部")]),t._l(t.typeList,(function(e,l){return i("div",{key:e,class:"tag "+(l===t.filterForm.typeIndex?"active":""),on:{click:function(e){return t.onTypeClick(l)}}},[t._v(t._s(e))])}))],2)],1),i("div",{staticClass:"list"},[i("div",{staticClass:"list-item",on:{click:t.onAdd}},[i("el-card",{staticClass:"add"},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v("新增原料")])])],1),t._l(t.list,(function(e,l){return i("el-card",{key:l,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[i("div",{staticClass:"my-card"},[i("div",{staticClass:"flex"},[i("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(l)}),i("div",{staticClass:"list-item__body"},[i("div",{staticClass:"body-title"},[t._v(t._s(e.name))]),i("div",{staticClass:"body-content"},[i("div",{staticClass:"content-item"},[t._v("原料类型："+t._s(e.type))]),i("div",{staticClass:"content-item"},[t._v("产品规格："+t._s(e.specification))])])])]),i("div",{staticClass:"list-item__footer"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onDelete(e,l)}}},[t._v("删除")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onEdit(e)}}},[t._v("编辑")])],1)])])}))],2),i("el-dialog",{attrs:{"custom-class":"add-dialog",title:(t.form.id?"编辑":"新增")+"原料",visible:t.formVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{ref:"productForm",attrs:{model:t.form,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"原料名称"}},[i("el-input",{attrs:{placeholder:"例：半光涤纶FDY、暗光经纶DTY"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"原料类型"}},[i("el-cascader",{attrs:{options:t.options,placeholder:"请选择原料类型"},model:{value:t.form.typeArr,callback:function(e){t.$set(t.form,"typeArr",e)},expression:"form.typeArr"}})],1),i("el-form-item",{attrs:{label:"产品规格"}},[i("el-input",{attrs:{placeholder:"请输入产品规格"},model:{value:t.form.specification,callback:function(e){t.$set(t.form,"specification",e)},expression:"form.specification"}})],1),i("el-form-item",{attrs:{label:"供应商名称"}},[i("el-input",{attrs:{placeholder:"请输入供应商名称"},model:{value:t.form.vendor,callback:function(e){t.$set(t.form,"vendor",e)},expression:"form.vendor"}})],1),i("el-form-item",{attrs:{label:"批号"}},[i("el-input",{attrs:{placeholder:"请输入批号"},model:{value:t.form.batchNumber,callback:function(e){t.$set(t.form,"batchNumber",e)},expression:"form.batchNumber"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},o=[],a=(i("a15b"),i("a434"),i("ac1f"),i("1276"),i("4ec3")),n=i("7f16"),s=["#5bd171","#ffbf00","#AFB3AE"],r={components:{PageTitle:n["a"]},data:function(){return{loading:!1,list:[],filterForm:{typeIndex:-1},typeList:["FDY","DTY"],unitList:["公制","英制"],formVisible:!1,submitLoading:!1,form:{},options:[{value:"FDY",label:"FDY",children:[{value:"30D/24F",label:"30D/24F"},{value:"40D/24F",label:"40D/24F"},{value:"45D/24F",label:"45D/24F"},{value:"50D/24F",label:"50D/24F"},{value:"55D/24F",label:"55D/24F"},{value:"50D/72F",label:"50D/72F"},{value:"75D/36F",label:"75D/36F"},{value:"75D/72F",label:"75D/72F"},{value:"75D/144F",label:"75D/144F"},{value:"100D/144F",label:"100D/144F"},{value:"100D/72F",label:"100D/72F"},{value:"150D/288F",label:"150D/288F"}]},{value:"DTY",label:"DTY",children:[{value:"50D/36F",label:"50D/36F"},{value:"50D/72F",label:"50D/72F"},{value:"50D/96F",label:"50D/96F"},{value:"50D/144F",label:"50D/144F"},{value:"75D/36F",label:"75D/36F"},{value:"75D/72F",label:"75D/72F"},{value:"75D/144F",label:"75D/144F"},{value:"100D/36F",label:"100D/36F"},{value:"100D/48F",label:"100D/48F"},{value:"100D/96F",label:"100D/96F"},{value:"100D/144F",label:"100D/144F"},{value:"150D/48F",label:"150D/48F"},{value:"150D/96F",label:"150D/96F"},{value:"150D/144F",label:"150D/144F"},{value:"150D/288F",label:"150D/288F"}]}]}},mounted:function(){this.cid=this.getcid(),this.getList()},methods:{getcid:function(){return this.$route.query.cid&&"undefined"!=this.$route.query.cid?this.$route.query.cid:this.$store.state.user&&this.$store.state.user.userInfo&&this.$store.state.user.userInfo.Company.id},getBgColor:function(t){return"number"===typeof t?"background-color: ".concat(s[t-Math.floor(t/s.length)*s.length],";"):"正常运行"===t?"background-color: ".concat(s[0],";"):"停机"===t?"background-color: ".concat(s[1],";"):"未连接"===t?"background-color: ".concat(s[2],";"):void 0},onClick:function(t){console.log("item",t),this.$router.push("/company/detail/".concat(t.id))},onAdd:function(){this.form={},this.formVisible=!0},onEdit:function(t){t.typeArr=t.type.split("-"),this.form=t,this.formVisible=!0},onDelete:function(t,e){var i=this;Object(a["k"])({operation:"DELETE",value:{id:t.id}}).then((function(){i.list.splice(e,1),i.$notify({title:"成功",message:"删除成功！",type:"success"})}))},onTypeClick:function(t){this.filterForm.typeIndex=t},getList:function(){var t=this;this.loading=!0,Object(a["k"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(e){t.list=e,t.loading=!1})).catch((function(e){t.loading=!1}))},onSubmit:function(){var t=this;this.$refs.productForm.validate((function(e){e&&(t.submitLoading=!0,t.form.companyId=t.cid,t.form.type=t.form.typeArr.join("-"),Object(a["k"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(e){t.submitLoading=!1,t.formVisible=!1,t.form.id||t.list.unshift(t.form),t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.submitLoading=!1})))}))},onFilter:function(){this.getList()}}},c=r,u=(i("b601"),i("adce"),i("2877")),f=Object(u["a"])(c,l,o,!1,null,"713cb319",null);e["default"]=f.exports},"6f49":function(t,e,i){},"7f16":function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"PageTitle"},[t._v(t._s(t.title))])},o=[],a={props:["title"]},n=a,s=(i("2b25"),i("2877")),r=Object(s["a"])(n,l,o,!1,null,"3d9e3b04",null);e["a"]=r.exports},8981:function(t,e,i){},a15b:function(t,e,i){"use strict";var l=i("23e7"),o=i("44ad"),a=i("fc6a"),n=i("a640"),s=[].join,r=o!=Object,c=n("join",",");l({target:"Array",proto:!0,forced:r||!c},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},a434:function(t,e,i){"use strict";var l=i("23e7"),o=i("23cb"),a=i("a691"),n=i("50c4"),s=i("7b0b"),r=i("65f0"),c=i("8418"),u=i("1dde"),f=i("ae40"),d=u("splice"),m=f("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,v=Math.min,p=9007199254740991,F="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,e){var i,l,u,f,d,m,D=s(this),h=n(D.length),y=o(t,h),g=arguments.length;if(0===g?i=l=0:1===g?(i=0,l=h-y):(i=g-2,l=v(b(a(e),0),h-y)),h+i-l>p)throw TypeError(F);for(u=r(D,l),f=0;f<l;f++)d=y+f,d in D&&c(u,f,D[d]);if(u.length=l,i<l){for(f=y;f<h-l;f++)d=f+l,m=f+i,d in D?D[m]=D[d]:delete D[m];for(f=h;f>h-l+i;f--)delete D[f-1]}else if(i>l)for(f=h-l;f>y;f--)d=f+l-1,m=f+i-1,d in D?D[m]=D[d]:delete D[m];for(f=0;f<i;f++)D[f+y]=arguments[f+2];return D.length=h-l+i,u}})},adce:function(t,e,i){"use strict";i("2472")},b601:function(t,e,i){"use strict";i("6f49")}}]);