(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b197662"],{"0e47":function(t,i,e){"use strict";e("1471")},1471:function(t,i,e){},"2b25":function(t,i,e){"use strict";e("8981")},"7f16":function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"PageTitle"},[t._v(t._s(t.title))])},o=[],n={props:["title"]},a=n,l=(e("2b25"),e("2877")),c=Object(l["a"])(a,s,o,!1,null,"3d9e3b04",null);i["a"]=c.exports},8981:function(t,i,e){},bffb:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container"},[e("PageTitle",{attrs:{title:t.$route.meta.title}}),e("div",{staticClass:"list"},[e("div",{staticClass:"list-item",on:{click:t.onAdd}},[e("el-card",{staticClass:"add"},[e("i",{staticClass:"el-icon-plus"}),e("span",[t._v("新增分组")])])],1),t._l(t.list,(function(i,s){return e("el-card",{key:s,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[e("div",{staticClass:"flex"},[e("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(s)}),e("div",{staticClass:"list-item__body"},[e("div",{staticClass:"body-title"},[t._v("编号：0000"+t._s(s+1))]),e("div",{staticClass:"body-content"},[e("div",{staticClass:"content-item"},[t._v("组名："+t._s(i.name))]),e("div",{staticClass:"content-item"},[t._v("设备数："+t._s(i.Devices.length))])])])]),e("div",{staticClass:"list-item__footer"},[e("router-link",{attrs:{type:"text",to:"/device?cid="+t.cid}},[t._v("查看设备")]),e("el-divider",{attrs:{direction:"vertical"}}),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.onEdit(i)}}},[t._v("编辑")])],1)])}))],2),e("el-dialog",{attrs:{"custom-class":"add-dialog",title:(t.form.id?"编辑":"新增")+"分组",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(i){t.dialogFormVisible=i}}},[e("el-form",{ref:"userForm",attrs:{model:t.form,"label-width":"50px"}},[e("el-form-item",{attrs:{label:"组名"}},[e("el-input",{attrs:{placeholder:"请输入组名"},model:{value:t.form.name,callback:function(i){t.$set(t.form,"name",i)},expression:"form.name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},o=[],n=e("5530"),a=e("4ec3"),l=e("2f62"),c=e("7f16"),r=["#2e2e2e","red","#ffbf00","#5bd171","#2c92f6"],d={components:{PageTitle:c["a"]},data:function(){return{cid:null,list:[],submitLoading:!1,dialogFormVisible:!1,form:{}}},computed:Object(n["a"])({},Object(l["b"])(["userInfo"])),mounted:function(){this.cid=this.getcid(),this.getList()},methods:{getcid:function(){return this.$route.query.cid&&"undefined"!=this.$route.query.cid?this.$route.query.cid:this.$store.state.user&&this.$store.state.user.userInfo&&this.$store.state.user.userInfo.Company.id},getBgColor:function(t){return"background-color: ".concat(r[t-Math.floor(t/r.length)*r.length],";")},onAdd:function(){this.form={name:"",companyId:this.cid},this.dialogFormVisible=!0},onEdit:function(t){this.form=t,this.dialogFormVisible=!0},getList:function(){var t=this;this.loading=!0,Object(a["i"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(i){t.list=i,t.loading=!1})).catch((function(i){t.loading=!1}))},onSubmit:function(){var t=this;console.log("this.form",this.form),this.$refs.userForm.validate((function(i){i&&(t.submitLoading=!0,Object(a["i"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(){t.submitLoading=!1,t.dialogFormVisible=!1,t.form.id||(t.form.enabled=!0,t.form.UserGroup={name:"平台管理员",role:"P_ADMIN"},t.list.unshift(t.form)),t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.submitLoading=!1})))}))}}},u=d,f=(e("cf1b"),e("0e47"),e("2877")),m=Object(f["a"])(u,s,o,!1,null,"1ed8c850",null);i["default"]=m.exports},cf1b:function(t,i,e){"use strict";e("f7a8")},f7a8:function(t,i,e){}}]);