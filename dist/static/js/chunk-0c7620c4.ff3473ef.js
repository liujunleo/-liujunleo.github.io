(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c7620c4"],{"2b25":function(t,e,i){"use strict";i("8981")},"2e77":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("PageTitle",{attrs:{title:t.$route.meta.title}}),i("div",{staticClass:"count"},[i("div",{staticClass:"count-item"},[i("p",{staticClass:"count-item__title"},[t._v("运行设备")]),i("div",{staticClass:"count-item__value"},[i("i",{staticClass:"el-icon-s-promotion count-item__icon",style:t.getBgColor(0)}),i("span",[t._v("8台")])])]),i("div",{staticClass:"count-item"},[i("p",{staticClass:"count-item__title"},[t._v("停机设备")]),i("div",{staticClass:"count-item__value"},[i("i",{staticClass:"el-icon-s-promotion count-item__icon",style:t.getBgColor(1)}),i("span",[t._v("2台")])])]),i("div",{staticClass:"count-item"},[i("p",{staticClass:"count-item__title"},[t._v("未连接设备")]),i("div",{staticClass:"count-item__value"},[i("i",{staticClass:"el-icon-s-promotion count-item__icon",style:t.getBgColor(2)}),i("span",[t._v("3台")])])])]),i("el-form",{staticClass:"filters",attrs:{model:t.filterForm,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"品牌类型："}},[i("div",{class:"tag "+(-1===t.filterForm.brandIndex?"active":""),on:{click:function(e){return t.onTypeClick(-1)}}},[t._v("全部")]),t._l(t.brandList,(function(e,o){return i("div",{key:e,class:"tag "+(o===t.filterForm.brandIndex?"active":""),on:{click:function(e){return t.onTypeClick(o)}}},[t._v(t._s(e))])}))],2),i("el-form-item",{attrs:{label:"设备分组："}},[i("div",{class:"tag "+(-1===t.filterForm.deviceGroupIndex?"active":""),on:{click:function(e){return t.onTypeClick(-1)}}},[t._v("全部")]),t._l(t.deviceGroupList,(function(e,o){return i("div",{key:e,class:"tag "+(o===t.filterForm.deviceGroupIndex?"active":""),on:{click:function(e){return t.onDeviceGroupClick(o)}}},[t._v(t._s(e.name))])}))],2),i("el-form-item",{attrs:{label:"设备类型："}},[i("div",{class:"tag "+(-1===t.filterForm.typeIndex?"active":""),on:{click:function(e){return t.onTypeClick(-1)}}},[t._v("全部")]),t._l(t.deviceTypeList,(function(e,o){return i("div",{key:e,class:"tag "+(o===t.filterForm.typeIndex?"active":""),on:{click:function(e){return t.onTypeClick(o)}}},[t._v(t._s(e))])}))],2),i("el-form-item",{attrs:{label:"当前产品："}},[i("div",{class:"tag "+(-1===t.filterForm.productIndex?"active":""),on:{click:function(e){return t.onProductClick(-1)}}},[t._v("全部")]),t._l(t.productList,(function(e,o){return i("div",{key:e,class:"tag "+(o===t.filterForm.productIndex?"active":""),on:{click:function(e){return t.onProductClick(o)}}},[t._v(t._s(e))])}))],2),i("el-form-item",{attrs:{label:"当前状态："}},[i("div",{class:"tag "+(-1===t.filterForm.statusIndex?"active":""),on:{click:function(e){return t.onStatusClick(-1)}}},[t._v("全部")]),t._l(t.statusList,(function(e,o){return i("div",{key:e,class:"tag "+(o===t.filterForm.statusIndex?"active":""),on:{click:function(e){return t.onStatusClick(o)}}},[t._v(t._s(e))])}))],2)],1),i("div",{staticClass:"list"},[i("div",{staticClass:"list-item",on:{click:t.onAdd}},[i("el-card",{staticClass:"add"},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v("新增设备")])])],1),t._l(t.list,(function(e,o){return i("el-card",{key:o,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[i("div",{staticClass:"flex"},[i("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(e.status)}),i("div",{staticClass:"list-item__body"},[i("div",{staticClass:"body-title"},[t._v("编号："+t._s(e.deviceId))]),i("div",{staticClass:"body-title"},[t._v("当前上机产品："+t._s(e.product))]),i("div",{staticClass:"body-content"},[i("div",{staticClass:"content-item"},[i("span",[t._v("效率")]),i("span",{attrs:{unit:"%"}},[t._v(t._s(e.totalDevice||0))])]),i("div",{staticClass:"content-item"},[i("span",[t._v("产量")]),i("span",{attrs:{unit:""}},[t._v(t._s(e.currentOutput||0))])])])])]),i("div",{staticClass:"list-item__footer"},[i("router-link",{attrs:{type:"text",to:"/device/status?cid="+t.cid}},[t._v("查看设备图")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onEdit(e)}}},[t._v("编辑")])],1)])}))],2),i("el-dialog",{attrs:{title:(t.form.id?"编辑":"新增")+"设备",visible:t.formVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{ref:"companyForm",attrs:{model:t.form,"label-position":"top","label-width":"120px"}},[i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"设备编号"}},[i("el-input",{attrs:{placeholder:"请输入设备编号"},model:{value:t.form.deviceId,callback:function(e){t.$set(t.form,"deviceId",e)},expression:"form.deviceId"}})],1),i("el-form-item",{attrs:{label:"设备名称"}},[i("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"设备类型"}},[i("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:t.form.deviceType,callback:function(e){t.$set(t.form,"deviceType",e)},expression:"form.deviceType"}},t._l(t.deviceTypeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"设备分组"}},[i("el-select",{attrs:{placeholder:"请选择设备分组"},model:{value:t.form.deviceGroupId,callback:function(e){t.$set(t.form,"deviceGroupId",e)},expression:"form.deviceGroupId"}},t._l(t.deviceGroupList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"设备品牌"}},[i("el-select",{attrs:{placeholder:"请选择设备品牌"},model:{value:t.form.brandId,callback:function(e){t.$set(t.form,"brandId",e)},expression:"form.brandId"}},t._l(t.brandList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),i("el-form-item",{attrs:{label:"当前上机产品"}},[i("el-select",{attrs:{placeholder:"请选择当前上机产品"},model:{value:t.form.productId,callback:function(e){t.$set(t.form,"productId",e)},expression:"form.productId"}},t._l(t.productList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"车间行号"}},[i("el-input",{attrs:{placeholder:"请输入车间行号"},model:{value:t.form.row,callback:function(e){t.$set(t.form,"row",e)},expression:"form.row"}})],1),i("el-form-item",{attrs:{label:"车间列号"}},[i("el-input",{attrs:{placeholder:"请输入车间列号"},model:{value:t.form.column,callback:function(e){t.$set(t.form,"column",e)},expression:"form.column"}})],1),i("el-form-item",{attrs:{label:"485网格编号"}},[i("el-input",{attrs:{placeholder:"请输入485网格编号"},model:{value:t.form.networkId485,callback:function(e){t.$set(t.form,"networkId485",e)},expression:"form.networkId485"}})],1)],1),i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"计量单位"}},[i("el-select",{attrs:{placeholder:"请选择计量单位"},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}},t._l(t.unitList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),i("el-form-item",{attrs:{label:"网络连接"}},[i("el-select",{attrs:{placeholder:"请选择网络连接"},model:{value:t.form.network,callback:function(e){t.$set(t.form,"network",e)},expression:"form.network"}},t._l(t.networkList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1)]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],s=(i("d81d"),i("4ec3")),l=i("7f16"),r=["#5bd171","#ffbf00","#AFB3AE"],c={components:{PageTitle:l["a"]},data:function(){return{loading:!1,list:[],filterForm:{brandIndex:-1,deviceGroupIndex:-1,typeIndex:-1,productIndex:-1,statusIndex:-1},brandList:["Karl Mayer","常德","隆龙升","晨业","科荣"],deviceTypeList:["经编","喷气","喷水","圆机","有梭","剑杆"],productList:["麂皮绒","仿棉绒","荷兰绒","圈绒","金光绒","网眼布(涤纶)","经编平布","丝光绒","意大利绒"],statusList:["正常运行","停机","未连接"],networkList:["有线","无线","4G","3G","2G"],deviceGroupList:[],unitList:["公制","英制"],formVisible:!1,submitLoading:!1,form:{}}},mounted:function(){this.cid=this.getcid(),this.getList(),this.getDeviceGroupList()},methods:{getcid:function(){return this.$route.query.cid&&"undefined"!=this.$route.query.cid?this.$route.query.cid:this.$store.state.user&&this.$store.state.user.userInfo&&this.$store.state.user.userInfo.Company.id},getBgColor:function(t){return"number"===typeof t?"background-color: ".concat(r[t-Math.floor(t/r.length)*r.length],";"):"正常运行"===t?"background-color: ".concat(r[0],";"):"停机"===t?"background-color: ".concat(r[1],";"):"未连接"===t?"background-color: ".concat(r[2],";"):void 0},getDeviceGroupList:function(){var t=this;Object(s["i"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(e){t.deviceGroupList=e}))},onClick:function(t){console.log("item",t),this.$router.push("/company/detail/".concat(t.id))},onAdd:function(){this.form={},this.formVisible=!0},onEdit:function(t){this.form=t,this.formVisible=!0,console.log("item",t)},onChangeStatus:function(t){var e=this;Object(s["h"])({operation:"UPDATE",value:{id:t.id,enabled:t.enabled}}).then((function(){e.$notify({title:"成功",message:"操作成功！",type:"success"})}))},onTypeClick:function(t){this.filterForm.typeIndex=t},onProductClick:function(t){this.filterForm.productIndex=t},onStatusClick:function(t){this.filterForm.statusIndex=t},getList:function(){var t=this;this.loading=!0,Object(s["h"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(e){e.map((function(t){t.deviceGroupId=t.DeviceGroup.id,t.productId=t.product})),t.list=e,t.loading=!1})).catch((function(e){t.loading=!1}))},onSubmit:function(){var t=this;this.$refs.companyForm.validate((function(e){e&&(t.submitLoading=!0,t.form.companyId=t.cid,Object(s["h"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(e){t.submitLoading=!1,t.formVisible=!1,t.form.id||(t.form.status="未连接",t.list.unshift(t.form)),t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.submitLoading=!1})))}))},onFilter:function(){this.getList()}}},a=c,u=(i("661b"),i("f0f6"),i("2877")),d=Object(u["a"])(a,o,n,!1,null,"4f174e8c",null);e["default"]=d.exports},"661b":function(t,e,i){"use strict";i("f942")},"7f16":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"PageTitle"},[t._v(t._s(t.title))])},n=[],s={props:["title"]},l=s,r=(i("2b25"),i("2877")),c=Object(r["a"])(l,o,n,!1,null,"3d9e3b04",null);e["a"]=c.exports},8981:function(t,e,i){},beda:function(t,e,i){},f0f6:function(t,e,i){"use strict";i("beda")},f942:function(t,e,i){}}]);