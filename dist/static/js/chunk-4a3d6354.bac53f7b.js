(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a3d6354"],{2023:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("PageTitle",{attrs:{title:t.$route.meta.title}}),o("el-form",{staticClass:"filters",attrs:{model:t.filterForm,"label-width":"120px"}},[o("el-row",{staticClass:"mgb-20"},[o("el-col",{attrs:{offset:6,span:12}},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.filterForm.filterText,callback:function(e){t.$set(t.filterForm,"filterText",e)},expression:"filterForm.filterText"}},[o("el-button",{attrs:{slot:"append"},on:{click:t.onFilter},slot:"append"},[t._v("搜 索")])],1)],1)],1),o("el-form-item",{attrs:{label:"主营产品："}},[o("div",{class:"tag "+(-1===t.filterForm.typeIndex?"active":""),on:{click:function(e){return t.onTypeClick(-1)}}},[t._v("全部")]),t._l(t.productTypeList,(function(e,i){return o("div",{key:e,class:"tag "+(i===t.filterForm.typeIndex?"active":""),on:{click:function(e){return t.onTypeClick(i)}}},[t._v(t._s(e))])}))],2),o("el-form-item",{attrs:{label:"所在地区："}},[o("div",{class:"tag "+(-1===t.filterForm.areaIndex?"active":""),on:{click:function(e){return t.onAreaClick(-1)}}},[t._v("全部")]),t._l(t.areaList,(function(e,i){return o("div",{key:e,class:"tag "+(i===t.filterForm.areaIndex?"active":""),on:{click:function(e){return t.onAreaClick(i)}}},[t._v(t._s(e))])}))],2)],1),o("div",{staticClass:"list"},[o("div",{staticClass:"list-item",on:{click:t.onAdd}},[o("el-card",{staticClass:"add"},[o("i",{staticClass:"el-icon-plus"}),o("span",[t._v("新增公司")])])],1),t._l(t.list,(function(e,i){return o("el-card",{key:i,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[o("div",{staticClass:"flex"},[o("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(i)}),o("div",{staticClass:"list-item__body"},[o("div",{staticClass:"body-title"},[t._v(t._s(e.name))]),o("div",{staticClass:"body-content"},[o("div",{staticClass:"content-item"},[o("span",[t._v("注册设备")]),o("span",{attrs:{unit:"台"}},[t._v(t._s(e.totalDevice))])]),o("div",{staticClass:"content-item"},[o("span",[t._v("连接设备")]),o("span",{attrs:{unit:"台"}},[t._v(t._s(e.connectedDevice))])]),o("div",{staticClass:"content-item"},[o("span",[t._v("本月产量")]),o("span",[t._v(t._s(e.currentMonthOutput))])])])])]),o("div",{staticClass:"list-item__footer"},[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.onClick(e)}}},[t._v("查看公司详情")]),o("el-divider",{attrs:{direction:"vertical"}}),o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.onEdit(e)}}},[t._v("快速编辑")])],1)])}))],2),o("el-dialog",{attrs:{title:(t.form.id?"编辑":"新增")+"入驻公司",visible:t.companyFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.companyFormVisible=e}}},[o("el-form",{ref:"companyForm",attrs:{model:t.form,"label-position":"top","label-width":"120px"}},[o("div",{staticClass:"inline-form-item"},[o("el-form-item",{attrs:{label:"企业名称"}},[o("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"网站"}},[o("el-input",{attrs:{placeholder:"请输入网站"},model:{value:t.form.website,callback:function(e){t.$set(t.form,"website",e)},expression:"form.website"}})],1),o("el-form-item",{attrs:{label:"主营产品"}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.productType,callback:function(e){t.$set(t.form,"productType",e)},expression:"form.productType"}},t._l(t.productTypeList,(function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),o("div",{staticClass:"inline-form-item"},[o("el-form-item",{attrs:{label:"联系电话"}},[o("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),o("el-form-item",{attrs:{label:"省市区"}},[o("el-cascader",{attrs:{options:t.districts,placeholder:"请选择省市区"},on:{change:t.handleAddressChange},model:{value:t.form.locationArr,callback:function(e){t.$set(t.form,"locationArr",e)},expression:"form.locationArr"}})],1),o("el-form-item",{attrs:{label:"详细地址"}},[o("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),o("el-form-item",{attrs:{label:"企业介绍"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入企业介绍"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),o("div",{staticClass:"inline-form-item"},[o("el-form-item",{attrs:{label:"联系人"}},[o("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1),o("el-form-item",{attrs:{label:"联系人电话"}},[o("el-input",{attrs:{placeholder:"请输入联系人电话"},model:{value:t.form.contactPhone,callback:function(e){t.$set(t.form,"contactPhone",e)},expression:"form.contactPhone"}})],1),o("el-form-item",{attrs:{label:"联系人邮箱"}},[o("el-input",{attrs:{placeholder:"请输入联系人邮箱"},model:{value:t.form.contactEmail,callback:function(e){t.$set(t.form,"contactEmail",e)},expression:"form.contactEmail"}})],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.companyFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],a=(o("4de4"),o("c975"),o("a15b"),o("b0c0"),o("ac1f"),o("1276"),o("4ec3")),l=o("7f16"),r=o("1b37"),s=o.n(r),c=["#2e2e2e","red","#ffbf00","#5bd171","#2c92f6"],m={components:{PageTitle:l["a"]},data:function(){return{districts:s.a,loading:!1,list:[],filterForm:{filterText:"",typeIndex:-1,areaIndex:-1},productTypeList:["麂皮绒","仿棉绒","荷兰绒","圈绒","金光绒","网眼布（涤纶）","经编平布","丝光绒","意大利绒"],areaList:["苏州","嘉兴","其他"],companyFormVisible:!1,submitLoading:!1,form:{}}},mounted:function(){this.getList()},methods:{getBgColor:function(t){return"background-color: ".concat(c[t-Math.floor(t/c.length)*c.length],";")},onClick:function(t){console.log("item",t),this.$router.push("/company/detail?cid=".concat(t.id))},onAdd:function(){this.form={},this.companyFormVisible=!0},onEdit:function(t){t.locationArr=t.location.split("-"),this.form=t,this.companyFormVisible=!0,console.log("item",t)},onTypeClick:function(t){this.filterForm.typeIndex=t},onAreaClick:function(t){this.filterForm.areaIndex=t},handleAddressChange:function(t){console.log(t)},getList:function(){var t=this;this.loading=!0,Object(a["f"])({}).then((function(e){var o=t.filterForm.filterText,i=[];o&&(i=e.companies.filter((function(t){return t.name.indexOf(o)>-1}))),t.list=o?i:e.companies,t.loading=!1})).catch((function(e){t.loading=!1}))},onSubmit:function(){var t=this;console.log("this.form",this.form),this.$refs.companyForm.validate((function(e){e&&(t.submitLoading=!0,t.form.location=t.form.locationArr.join("-"),Object(a["c"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(){t.submitLoading=!1,t.companyFormVisible=!1,t.form.id||(t.form.totalDevice=0,t.form.connectedDevice=0,t.form.currentMonthOutput=0,t.list.unshift(t.form)),t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.submitLoading=!1})))}))},onFilter:function(){this.getList()}}},f=m,d=(o("9de5"),o("a719"),o("2877")),u=Object(d["a"])(f,i,n,!1,null,"b04e3dac",null);e["default"]=u.exports},"6a4c":function(t,e,o){},"9de5":function(t,e,o){"use strict";o("fda1")},a15b:function(t,e,o){"use strict";var i=o("23e7"),n=o("44ad"),a=o("fc6a"),l=o("a640"),r=[].join,s=n!=Object,c=l("join",",");i({target:"Array",proto:!0,forced:s||!c},{join:function(t){return r.call(a(this),void 0===t?",":t)}})},a719:function(t,e,o){"use strict";o("6a4c")},fda1:function(t,e,o){}}]);