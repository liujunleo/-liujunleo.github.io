(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08249cf1"],{"26a0":function(t,e,i){"use strict";i("36b1")},"2baf":function(t,e,i){"use strict";i("e1b8")},"36b1":function(t,e,i){},"7db0":function(t,e,i){"use strict";var a=i("23e7"),o=i("b727").find,l=i("44d2"),n=i("ae40"),s="find",r=!0,c=n(s);s in[]&&Array(1)[s]((function(){r=!1})),a({target:"Array",proto:!0,forced:r||!c},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l(s)},a15b:function(t,e,i){"use strict";var a=i("23e7"),o=i("44ad"),l=i("fc6a"),n=i("a640"),s=[].join,r=o!=Object,c=n("join",",");a({target:"Array",proto:!0,forced:r||!c},{join:function(t){return s.call(l(this),void 0===t?",":t)}})},e1b8:function(t,e,i){},fbd3:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("PageTitle",{attrs:{title:t.$route.meta.title}}),i("el-button",{staticClass:"save-btn",attrs:{type:"primary",loading:t.companyBtnLoading},on:{click:t.onSubmitCompany}},[t._v("保 存")]),i("el-form",{ref:"companyForm",attrs:{model:t.form,"label-position":"top","label-width":"120px"}},[i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"企业名称"}},[i("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:t.detail.name,callback:function(e){t.$set(t.detail,"name",e)},expression:"detail.name"}})],1),i("el-form-item",{attrs:{label:"网站"}},[i("el-input",{attrs:{placeholder:"请输入网站"},model:{value:t.detail.website,callback:function(e){t.$set(t.detail,"website",e)},expression:"detail.website"}})],1),i("el-form-item",{attrs:{label:"主营产品"}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.detail.productType,callback:function(e){t.$set(t.detail,"productType",e)},expression:"detail.productType"}},t._l(t.productTypeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"联系电话"}},[i("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.detail.phone,callback:function(e){t.$set(t.detail,"phone",e)},expression:"detail.phone"}})],1),i("el-form-item",{attrs:{label:"省市区"}},[i("el-cascader",{attrs:{options:t.districts,placeholder:"请选择省市区"},on:{change:t.handleAddressChange},model:{value:t.detail.locationArr,callback:function(e){t.$set(t.detail,"locationArr",e)},expression:"detail.locationArr"}})],1),i("el-form-item",{attrs:{label:"详细地址"}},[i("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:t.detail.address,callback:function(e){t.$set(t.detail,"address",e)},expression:"detail.address"}})],1)],1),i("el-form-item",{attrs:{label:"企业介绍"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入企业介绍"},model:{value:t.detail.description,callback:function(e){t.$set(t.detail,"description",e)},expression:"detail.description"}})],1),i("div",{staticClass:"inline-form-item"},[i("el-form-item",{attrs:{label:"联系人"}},[i("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:t.detail.contactName,callback:function(e){t.$set(t.detail,"contactName",e)},expression:"detail.contactName"}})],1),i("el-form-item",{attrs:{label:"联系人电话"}},[i("el-input",{attrs:{placeholder:"请输入联系人电话"},model:{value:t.detail.contactPhone,callback:function(e){t.$set(t.detail,"contactPhone",e)},expression:"detail.contactPhone"}})],1),i("el-form-item",{attrs:{label:"联系人邮箱"}},[i("el-input",{attrs:{placeholder:"请输入联系人邮箱"},model:{value:t.detail.contactEmail,callback:function(e){t.$set(t.detail,"contactEmail",e)},expression:"detail.contactEmail"}})],1)],1)],1),i("div",{staticClass:"list"},[i("div",{staticClass:"list-item",on:{click:t.onAdd}},[i("el-card",{staticClass:"add"},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v("新增用户")])])],1),t._l(t.list,(function(e,a){return i("el-card",{key:a,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[i("div",{staticClass:"flex"},[i("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(a)}),i("div",{staticClass:"list-item__body"},[i("div",{staticClass:"body-title"},[t._v(t._s(e.name))]),i("div",{staticClass:"body-content"},[i("div",{staticClass:"content-item"},[t._v("职务："+t._s(e.position))]),i("div",{staticClass:"content-item"},[t._v("权限："+t._s(e.UserGroup.name))])])])]),i("div",{staticClass:"list-item__footer"},[t.userInfo.id!=e.id?[i("div",{staticClass:"switch"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},on:{change:function(i){return t.onChangeStatus(e)}},model:{value:e.enabled,callback:function(i){t.$set(e,"enabled",i)},expression:"item.enabled"}})],1),i("el-divider",{attrs:{direction:"vertical"}})]:t._e(),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onEdit(e)}}},[t._v("编辑")])],2)])}))],2),i("el-dialog",{attrs:{"custom-class":"add-dialog",title:(t.form.id?"编辑":"新增")+"用户",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"userForm",attrs:{model:t.form,"label-width":"50px"}},[i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"邮箱"}},[i("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),i("el-form-item",{attrs:{label:"手机"}},[i("el-input",{attrs:{placeholder:"请输入手机"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),i("el-form-item",{attrs:{label:"职务"}},[i("el-input",{attrs:{placeholder:"请输入职务"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),i("el-form-item",{attrs:{label:"分组"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分组"},model:{value:t.form.groupId,callback:function(e){t.$set(t.form,"groupId",e)},expression:"form.groupId"}},t._l(t.groupList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"密码"}},[i("el-input",{attrs:{type:"password",placeholder:t.form.id?"输入可覆盖密码":"请设置密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.userLoading},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},o=[],l=(i("7db0"),i("a15b"),i("b0c0"),i("ac1f"),i("1276"),i("5530")),n=i("ade3"),s=i("4ec3"),r=i("2f62"),c=i("7f16"),d=i("1b37"),m=i.n(d),u=["#2e2e2e","red","#ffbf00","#5bd171","#2c92f6"],f={components:{PageTitle:c["a"]},data:function(){var t;return{cid:null,districts:m.a,list:[],companyBtnLoading:!1,userLoading:!1,dialogFormVisible:!1,filterForm:{filterText:""},form:(t={name:"",mobile:"",position:"",password:"",groupId:""},Object(n["a"])(t,"name",""),Object(n["a"])(t,"companyId",this.$route.query.cid||""),t),productTypeList:["经编","喷气","喷水","圆机","有梭","剑杆"],groupList:[{id:"910YZE2VTQE12DUTZM6VHM",name:"公司领导层"},{id:"AH37PAB2Q79SJI9GNODQ2E",name:"公司管理层"},{id:"AH37PAB2Q79SJI9GNODQQW",name:"公司运营"}],detail:{}}},computed:Object(l["a"])({},Object(r["b"])(["userInfo"])),mounted:function(){this.cid=this.$route.query.cid||this.userInfo.Company.id,this.getCompanyDetail(),this.getUserList()},methods:{getCompanyDetail:function(){var t=this;Object(s["e"])({operation:"GET",value:{id:this.cid}}).then((function(e){e.locationArr=e.location.split("-"),t.detail=e}))},onSubmitCompany:function(){var t=this;this.$refs.companyForm.validate((function(e){e&&(t.companyBtnLoading=!0,t.detail.location=t.detail.locationArr.join("-"),Object(s["e"])({operation:"UPDATE",value:t.detail}).then((function(e){t.companyBtnLoading=!1,t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.companyBtnLoading=!1})))}))},getBgColor:function(t){return"background-color: ".concat(u[t-Math.floor(t/u.length)*u.length],";")},onAdd:function(){var t;this.form=(t={name:"",mobile:"",position:"",password:"",groupId:""},Object(n["a"])(t,"name",""),Object(n["a"])(t,"companyId",this.cid),t),this.dialogFormVisible=!0},onEdit:function(t){this.form=t,this.form.groupId=t.UserGroup.id,this.dialogFormVisible=!0},onDelete:function(t){var e=this;this.loading=!0,Object(s["m"])({operation:"UPDATE",value:{id:t.id,enabled:!1}}).then((function(t){e.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(t){e.loading=!1}))},onChangeStatus:function(t){var e=this;Object(s["m"])({operation:"UPDATE",value:{id:t.id,enabled:t.enabled}}).then((function(){e.$notify({title:"成功",message:"操作成功！",type:"success"})}))},handleAddressChange:function(t){console.log(t)},onFilter:function(){this.getUserList()},getUserList:function(){var t=this;this.loading=!0,Object(s["m"])({operation:"GETLIST",value:{companyId:this.cid}}).then((function(e){t.list=e,t.loading=!1})).catch((function(e){t.loading=!1}))},onSubmit:function(){var t=this;this.$refs.userForm.validate((function(e){e&&(t.userLoading=!0,t.form.companyId=t.cid,Object(s["m"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(e){if(t.userLoading=!1,t.dialogFormVisible=!1,!t.form.id){t.form=e;var i=t.groupList.find((function(t){return t.id===e.groupId})).name;t.form.UserGroup={id:e.groupId,name:i},t.list.unshift(t.form)}t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.userLoading=!1})))}))}}},p=f,b=(i("2baf"),i("26a0"),i("2877")),h=Object(b["a"])(p,a,o,!1,null,"1cb3820b",null);e["default"]=h.exports}}]);