(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cddfd3e"],{2861:function(t,e,i){"use strict";i("6cc7")},"2b25":function(t,e,i){"use strict";i("8981")},"5b73":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("PageTitle",{attrs:{title:t.$route.meta.title}}),i("el-form",{staticClass:"filters",attrs:{model:t.filterForm,"label-width":"120px"}},[i("el-row",{staticClass:"mgb-20"},[i("el-col",{attrs:{offset:6,span:12}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.filterForm.filterText,callback:function(e){t.$set(t.filterForm,"filterText",e)},expression:"filterForm.filterText"}},[i("el-button",{attrs:{slot:"append"},on:{click:t.onFilter},slot:"append"},[t._v("搜 索")])],1)],1)],1)],1),i("div",{staticClass:"list"},[i("div",{staticClass:"list-item",on:{click:t.onAdd}},[i("el-card",{staticClass:"add"},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v("新增用户")])])],1),t._l(t.list,(function(e,o){return i("el-card",{key:o,staticClass:"list-item",attrs:{"body-style":{padding:"0px"}}},[i("div",{staticClass:"flex"},[i("i",{staticClass:"el-icon-s-promotion",style:t.getBgColor(o)}),i("div",{staticClass:"list-item__body"},[i("div",{staticClass:"body-title"},[t._v(t._s(e.name))]),i("div",{staticClass:"body-content"},[i("div",{staticClass:"content-item"},[t._v("职务："+t._s(e.position))]),i("div",{staticClass:"content-item"},[t._v("权限："+t._s(e.UserGroup.name))])])])]),i("div",{staticClass:"list-item__footer"},[t.userInfo.id!=e.id?[i("div",{staticClass:"switch"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc"},on:{change:function(i){return t.onChangeStatus(e)}},model:{value:e.enabled,callback:function(i){t.$set(e,"enabled",i)},expression:"item.enabled"}})],1),i("el-divider",{attrs:{direction:"vertical"}})]:t._e(),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.onEdit(e)}}},[t._v("编辑")])],2)])}))],2),i("el-dialog",{attrs:{"custom-class":"add-dialog",title:(t.form.id?"编辑":"新增")+"用户",visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"userForm",attrs:{model:t.form,"label-width":"50px"}},[i("el-form-item",{attrs:{label:"姓名"}},[i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"邮箱"}},[i("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),i("el-form-item",{attrs:{label:"手机"}},[i("el-input",{attrs:{placeholder:"请输入手机"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),i("el-form-item",{attrs:{label:"职务"}},[i("el-input",{attrs:{placeholder:"请输入职务"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),i("el-form-item",{attrs:{label:"密码"}},[i("el-input",{attrs:{type:"password",placeholder:t.form.id?"输入可覆盖密码":"请设置密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},s=[],l=(i("4de4"),i("c975"),i("b0c0"),i("5530")),a=i("4ec3"),n=i("2f62"),r=i("7f16"),c=["#2e2e2e","red","#ffbf00","#5bd171","#2c92f6"],f={components:{PageTitle:r["a"]},data:function(){return{list:[],dialogFormVisible:!1,filterForm:{filterText:""},form:{}}},computed:Object(l["a"])({},Object(n["b"])(["userInfo"])),mounted:function(){this.getList()},methods:{getBgColor:function(t){return"background-color: ".concat(c[t-Math.floor(t/c.length)*c.length],";")},onAdd:function(){this.form={},this.dialogFormVisible=!0},onEdit:function(t){this.form=t,this.dialogFormVisible=!0},onChangeStatus:function(t){var e=this;Object(a["a"])({operation:"UPDATE",value:{id:t.id,enabled:t.enabled}}).then((function(){e.submitLoading=!1,e.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){e.submitLoading=!1}))},onFilter:function(){this.getList()},getList:function(){var t=this;this.loading=!0,Object(a["b"])({}).then((function(e){var i=t.filterForm.filterText,o=[];i&&(o=e.filter((function(t){return t.name.indexOf(i)>-1}))),t.list=i?o:e,t.loading=!1})).catch((function(e){t.loading=!1}))},onSubmit:function(){var t=this;console.log("this.form",this.form),this.$refs.userForm.validate((function(e){e&&(t.submitLoading=!0,Object(a["a"])({operation:t.form.id?"UPDATE":"CREATE",value:t.form}).then((function(){t.submitLoading=!1,t.dialogFormVisible=!1,t.form.id||(t.form.enabled=!0,t.form.UserGroup={name:"平台管理员",role:"P_ADMIN"},t.list.unshift(t.form)),t.$notify({title:"成功",message:"操作成功！",type:"success"})})).catch((function(){t.submitLoading=!1})))}))}}},d=f,m=(i("fc80"),i("2861"),i("2877")),u=Object(m["a"])(d,o,s,!1,null,"55e49598",null);e["default"]=u.exports},"6cc7":function(t,e,i){},"7f16":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"PageTitle"},[t._v(t._s(t.title))])},s=[],l={props:["title"]},a=l,n=(i("2b25"),i("2877")),r=Object(n["a"])(a,o,s,!1,null,"3d9e3b04",null);e["a"]=r.exports},8981:function(t,e,i){},fa89:function(t,e,i){},fc80:function(t,e,i){"use strict";i("fa89")}}]);